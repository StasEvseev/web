webpackJsonp([1],{"0IF4":function(e,t){},"0fkY":function(e,t){},"2mV7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("gNcp"),s={};i.keys().forEach(function(e){"./index.js"!==e&&(s[e.replace(/(\.\/|\.js)/g,"")]=i(e).default)}),t.default=s},"35MQ":function(e,t){},"698s":function(e,t){},"90Rz":function(e,t,n){"use strict";var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),a=n("H/Zg"),o={computed:s()({},Object(r.c)(["getIdentity"]),{userFirstLetter:function(){if(this.checkIdentity())return this.getIdentity.name.substring(0,1)}}),methods:s()({},Object(r.b)(["updateIdentity"]),{checkIdentity:function(){return!!this.getIdentity.name}}),created:function(){var e=this;this.checkIdentity()||a.a.getIdentity().then(function(t){"OK"===t.status&&e.updateIdentity(t.result[0])}).catch(function(e){console.log(e)})}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"user-identity"},[t("div",{staticClass:"avatar"},[this._v(this._s(this.userFirstLetter))]),this._v(" "),t("div",{staticClass:"user-name"},[this._v(this._s(this.getIdentity.name))])])},staticRenderFns:[]};var u=n("VU/8")(o,c,!1,function(e){n("CESn")},"data-v-0cfe4bab",null).exports,d={computed:s()({},Object(r.c)(["connectionStatus"])),components:{UserIdentity:u}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("div",{staticClass:"header-right"},[t("user-identity"),this._v(" "),t("div",{staticClass:"connection-status",class:this.connectionStatus.status})],1)])},staticRenderFns:[]};var f=n("VU/8")(d,l,!1,function(e){n("nqlI")},"data-v-6c2f64b8",null);t.a=f.exports},CESn:function(e,t){},G8ta:function(e,t){},"H/Zg":function(e,t,n){"use strict";var i=n("mvHQ"),s=n.n(i),r={removeFriend:function(e){return fetch(this.makeApiEndpoint("friend/remove"),{method:"DELETE",body:s()({global_id:e})}).then(function(e){return e.json()})},addFriend:function(e){return fetch(this.makeApiEndpoint("friend/add"),{method:"POST",body:s()({idurl:e})}).then(function(e){return e.json()})},observeUser:function(e){return fetch(this.makeApiEndpoint("user/observe/"+e,"attempts=4")).then(function(e){return e.json()})},searchUser:function(e){return fetch(this.makeApiEndpoint("user/search/"+e)).then(function(e){return e.json()})},userList:function(){return fetch(this.makeApiEndpoint("friend/list")).then(function(e){return e.json()})},networkConnected:function(){return fetch(this.makeApiEndpoint("network/connected")).then(function(e){return e.json()})},serviceStop:function(e){return fetch(this.makeApiEndpoint("service/stop"+e),{method:"POST"}).then(function(e){return e.json()})},serviceStart:function(e){return fetch(this.makeApiEndpoint("service/start"+e),{method:"POST"}).then(function(e){return e.json()})},recoverIdentityFile:function(e){return fetch(this.makeApiEndpoint("identity/recover"),{method:"POST",body:s()({private_key_local_file:e})}).then(function(e){return e.json()})},recoverIdentityKey:function(e){return fetch(this.makeApiEndpoint("identity/recover"),{method:"POST",body:s()({private_key_source:e})}).then(function(e){return e.json()})},createIdentity:function(e){return fetch(this.makeApiEndpoint("identity/create"),{method:"POST",body:s()({username:e})}).then(function(e){return e.json()})},getIdentity:function(){return fetch(this.makeApiEndpoint("identity/get")).then(function(e){return e.json()})},eventsSend:function(e){return fetch(this.makeApiEndpoint("event/send"+e),{method:"POST",body:s()({request:"hello"})}).then(function(e){return e.json()})},eventsListen:function(){return fetch(this.makeApiEndpoint("event/listen/electron")).then(function(e){return e.json()})},getFiles:function(){return fetch(this.makeApiEndpoint("file/list")).then(function(e){return e.json()})},createPath:function(e){return fetch(this.makeApiEndpoint("file/create"),{method:"POST",body:s()({remote_path:e})}).then(function(e){return e.json()})},createFile:function(e,t){return fetch(this.makeApiEndpoint("file/upload/start"),{method:"POST",body:s()({remote_path:e,local_path:t})}).then(function(e){return e.json()})},deleteFile:function(e){return fetch(this.makeApiEndpoint("file/delete"),{method:"delete",body:s()({remote_path:e})})},downloadFile:function(e){var t=this;return this.getPath().then(function(n){return fetch(t.makeApiEndpoint("file/download/start"),{method:"POST",body:s()({remote_path:e})})})},getPath:function(){return fetch(this.makeApiEndpoint("config/get/paths/restore")).then(function(e){return e.json()})},setPath:function(e){return fetch(this.makeApiEndpoint("config/set/paths/restore"),{method:"POST",body:s()({value:e})}).then(function(e){return e.json()})},makeApiEndpoint:function(e,t){if(e)return t?this.constants.API_URL+":"+this.constants.PORT+"/"+e+"/"+this.constants.API_VERSION+"?"+t:this.constants.API_URL+":"+this.constants.PORT+"/"+e+"/"+this.constants.API_VERSION},constants:{PORT:"8180",API_URL:"http://localhost",API_VERSION:"v1"}};t.a=r},HknJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={UPDATE_MESSAGES:function(e,t){t.result&&t.result.length&&(e.messages.unshift(t),void 0===e.userKeyMessage[t.result[0].sender]&&(e.userKeyMessage[t.result[0].sender]=[]),e.userKeyMessage[t.result[0].sender].push(t),console.log(e.userKeyMessage))}};t.default={state:{messages:[],userKeyMessage:{}},mutations:i,getters:{getMessages:function(e){return e.messages}},constants:{}}},I4Mg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("H/Zg"),s={isFriendDetailsOpen:!1,currentFriend:{},friendsList:[],friendsListClone:[]},r={getFriends:function(e){return e.friendsList},isFriendDetailsOpen:function(e){return e.isFriendDetailsOpen},currentFriend:function(e){return e.currentFriend},getCurrentFriendData:function(){return s.friendsList?s.friendsList.filter(function(e){return e.global_id===s.currentFriend.global_id}):[]}},a={removeFriend:function(e,t){e.commit;var n=e.dispatch;i.a.removeFriend(t).then(function(e){n("getApiFriends"),n("closeFriend")})},getApiFriends:function(e){var t=e.commit;i.a.userList().then(function(e){t("UPDATE_FRIENDS",e.result)})},openFriend:function(e,t){var n=e.commit;n("UPDATE_CURRENT_FRIEND",t.global_id),n("UPDATE_IS_FRIEND_OPEN",!0)},closeFriend:function(e){(0,e.commit)("UPDATE_IS_FRIEND_OPEN",!1)}};t.default={state:s,getters:r,mutations:{UPDATE_IS_FRIEND_OPEN:function(e,t){e.isFriendDetailsOpen=t},UPDATE_CURRENT_FRIEND:function(e,t){e.currentFriend=e.friendsList.filter(function(e){return e.global_id===t})[0]},UPDATE_FRIENDS:function(e,t){e.friendsList=t}},actions:a,constants:{}}},IcnI:function(e,t,n){"use strict";var i=n("7+uW"),s=n("NYxO"),r=n("2mV7");i.a.use(s.a),t.a=new s.a.Store({modules:r.default,strict:!1})},M99r:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),s=n("H/Zg"),r=n("mdtg"),a=n("IcnI"),o=n("/ocq");i.a.use(o.a);var c=new o.a({routes:[{path:"/",name:"loading",component:n("PGcd").default},{path:"/home",name:"home",component:n("j7e0").default},{path:"/create-identity",name:"create-identity",component:n("eFTo").default},{path:"/users",name:"users",component:n("a32x").default},{path:"/settings",name:"settings",component:n("VKKr").default},{path:"/dead",name:"dead",component:n("lg9s").default},{path:"/loading-identity",name:"loading-identity",component:n("h47Z").default},{path:"*",redirect:"/"}]}),u=0,d={keepConnection:function(){var e=this;s.a.networkConnected().then(function(t){a.a.commit("UPDATE_IS_CONNECTED",t),setTimeout(function(){e.keepConnection()},2e3)}).catch(function(){(u+=1)>5&&c.push("dead"),setTimeout(function(){e.keepConnection()},1e3)})},eventsListen:function(){var e=this;s.a.eventsListen().then(function(t){a.a.commit("UPDATE_LAST_EVENT",t),e.eventsListen()})},messagesListen:function(){var e=this;r.a.getMessages().then(function(t){a.a.commit("UPDATE_MESSAGES",t),e.messagesListen()})}},l={name:"bitdust-web",created:function(){d.keepConnection(),d.eventsListen(),d.messagesListen()}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var h=n("VU/8")(l,f,!1,function(e){n("0fkY")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",router:c,store:a.a,components:{App:h},template:"<App/>"})},PGcd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),r=n("H/Zg"),a=n("NYxO"),o={name:"loading",data:function(){return{error:!1}},computed:s()({},Object(a.c)(["connectionStatus"])),methods:s()({},Object(a.b)(["updateIdentity"])),watch:{connectionStatus:function(e){var t=this;"OK"!==e.status?"identity_not_exist"===e.reason&&this.$router.push("create-identity"):r.a.getIdentity().then(function(e){"OK"===e.status?(t.updateIdentity(e.result[0]),t.$router.push("home")):t.$router.push("create-identity")}).catch(function(e){console.log(e)})}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.error?this._e():t("div",[t("h1",[this._v("\n            BitDust is Loading...\n        ")])]),this._v(" "),this.error?t("div",[t("h1",[this._v("\n            Ooops, something went wrong, can you please restart Bitdust\n        ")])]):this._e()])},staticRenderFns:[]};var u=n("VU/8")(o,c,!1,function(e){n("X/Sz")},"data-v-6c5f728c",null);t.default=u.exports},VKKr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),r=n("H/Zg"),a=n("bwGm"),o=n("90Rz"),c=n("NYxO"),u=n("7+uW"),d={name:"users",data:function(){return{localPath:"",downloadPath:""}},components:{navigation:a.a,bitHeader:o.a},methods:{setDownloadPath:function(){var e=this;r.a.setPath(this.downloadPath).then(function(t){"OK"===t.status&&e.getPath()})},getPath:function(){var e=this;r.a.getPath().then(function(t){e.localPath=t.result[0].value})}},computed:s()({},Object(c.c)(["getEvents"])),created:function(){this.getPath()}};u.a.filter("date",function(e){if(e)return new Date(1e3*e)});var l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings page"},[n("bit-header"),e._v(" "),n("div",{staticClass:"container"},[n("navigation"),e._v(" "),n("div",{staticClass:"content"},[n("h1",{staticClass:"title"},[e._v("\n                Settings\n            ")]),e._v(" "),n("h2",[e._v("Local path")]),e._v("\n            "+e._s(e.localPath)+"\n            "),n("h2",[e._v("\n                Set new path "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadPath,expression:"downloadPath"}],domProps:{value:e.downloadPath},on:{input:function(t){t.target.composing||(e.downloadPath=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.setDownloadPath}},[e._v("ok")])]),e._v(" "),n("h2",[e._v("Events - "+e._s(e.getEvents.length))]),e._v(" "),n("ul",e._l(e.getEvents,function(t){return n("li",[e._v("\n                    "+e._s(t.status)+"\n                    "),e._l(t.result,function(t){return n("div",[e._v("\n                        "+e._s(t.id)+"\n                        "+e._s(e._f("date")(t.time))+"\n                    ")])})],2)}))])],1)],1)},staticRenderFns:[]};var f=n("VU/8")(d,l,!1,function(e){n("Z/56")},"data-v-026657aa",null);t.default=f.exports},Wxss:function(e,t){},"X/Sz":function(e,t){},XHPq:function(e,t){},XSFQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("IcnI"),s={isLoaded:!1,hasIdentity:!1,identity:{},connectionStatus:{status:"ERROR"},events:[],lastEvent:{status:void 0}},r={UPDATE_IS_LOADED:function(e,t){e.isLoaded=t},UPDATE_HAS_IDENTITY:function(e,t){e.hasIdentity=t},UPDATE_IS_CONNECTED:function(e,t){e.connectionStatus=t},UPDATE_LAST_EVENT:function(e,t){e.lastEvent=t,i.a.commit("UPDATE_EVENTS",t)},UPDATE_EVENTS:function(e,t){e.events.unshift(t)},UPDATE_IDENTITY:function(e,t){e.identity=t}};t.default={state:s,mutations:r,getters:{connectionStatus:function(e){return e.connectionStatus},getLastEvent:function(e){return e.lastEvent},getEvents:function(e){return e.events},getIdentity:function(e){return e.identity}},actions:{updateIdentity:function(e,t){(0,e.commit)("UPDATE_IDENTITY",t)}},constants:{}}},"Z/56":function(e,t){},a32x:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),a=n("H/Zg"),o=n("bwGm"),c=n("90Rz"),u={name:"userMessages",data:function(){return{search:""}},methods:{},computed:s()({},Object(r.c)(["getMessages","currentFriend"]),{userMessages:function(){var e=this;if(this.getMessages)return this.getMessages.filter(function(t){if(t.result&&t.result[0].sender)return t.result[0].sender.toLowerCase().includes(e.currentFriend.global_id.toLowerCase())})},filteredList:function(){var e=this;if(this.getMessages)return this.getMessages.filter(function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())})}})},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-messages"},[n("ul",e._l(e.userMessages,function(t){return n("li",[n("span",{staticClass:"message"},[e._v(e._s(t.result[0].data.message))])])}))])},staticRenderFns:[]};var l=n("VU/8")(u,d,!1,function(e){n("sWyD")},"data-v-327da3a8",null).exports,f=n("mdtg"),h={components:{userMessages:l},data:function(){return{message:""}},methods:s()({},Object(r.b)(["closeFriend","removeFriend"]),{sendMessage:function(){var e=this;f.a.sendMessage({message:this.message,user:this.currentFriend}).then(function(t){e.resetOpenFriend()})},resetOpenFriend:function(){this.message=""}}),computed:s()({},Object(r.c)(["currentFriend","isFriendDetailsOpen","getCurrentFriendData","getFriends","getMessages"])),watch:{currentFriend:function(e){e&&this.resetOpenFriend()},isFriendDetailsOpen:function(e){e||this.resetOpenFriend()},getFriends:function(e){}},mounted:function(){var e=this;window.addEventListener("keyup",function(t){"Escape"===t.code&&e.closeFriend()})},comments:[l]},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friend",class:{open:e.isFriendDetailsOpen}},[n("span",{staticClass:"close",on:{click:e.closeFriend}},[e._v("close")]),e._v(" "),e._l(e.getCurrentFriendData,function(t){return n("div",e._l(t.messages,function(t){return n("div",[e._v("\n            "+e._s(t.data.anything)+"\n        ")])}))}),e._v(" "),n("h1",[e._v(e._s(e.currentFriend.alias))]),e._v(" "),n("h2",[e._v(e._s(e.currentFriend.global_id))]),e._v(" "),n("button",{on:{click:function(t){e.removeFriend(e.currentFriend.global_id)}}},[e._v("remove friend")]),e._v(" "),n("h2",[e._v("Chat")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),n("button",{on:{click:function(t){e.sendMessage()}}},[e._v("send")]),e._v(" "),n("hr"),e._v(" "),n("user-messages")],2)},staticRenderFns:[]};var _=n("VU/8")(h,v,!1,function(e){n("pnIo")},"data-v-2ee82c2c",null).exports,m={name:"friendMessagesCounter",data:function(){return{hasUnreadMessage:""}},props:["friend"],methods:{},computed:s()({},Object(r.c)(["getMessages","currentFriend","isFriendDetailsOpen"]),{userMessages:function(){var e=this;if(this.getMessages)return this.getMessages.filter(function(t){return t.result[0].sender.toLowerCase().includes(e.friend.global_id.toLowerCase())})},filteredList:function(){var e=this;if(this.getMessages)return this.getMessages.filter(function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())})}}),watch:{currentFriend:function(e){this.hasUnreadMessage=!(this.friend.global_id===e.global_id)}},created:function(){}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.userMessages.length>0?t("div",{staticClass:"user-messages"},[t("span",{staticClass:"messages"},[this._v(this._s(this.userMessages.length))])]):this._e()])},staticRenderFns:[]};var g=n("VU/8")(m,p,!1,function(e){n("hbwU")},"data-v-099d03ae",null).exports,F={name:"users",data:function(){return{search:"",searchResults:"",observeSearchAlias:[],addFriendResponse:""}},components:{navigation:o.a,bitHeader:c.a,friendDetails:_,friendMessageCounter:g},computed:s()({},Object(r.c)(["getFriends","getMessages"])),methods:s()({},Object(r.b)(["getApiFriends","openFriend"]),{searchUser:function(){var e=this;a.a.searchUser(this.search).then(function(t){e.searchResults=t.result,"exist"===t.result[0].result?e.observeSearchResult(t.result[0].nickname):e.observeSearchAlias=[]})},observeSearchResult:function(e){var t=this;a.a.observeUser(e).then(function(e){t.observeSearchAlias=e.result})},addFriend:function(e){var t=this;a.a.addFriend(e).then(function(e){t.addFriendResponse=e,t.getApiFriends()})}}),watch:{search:function(e){e.length>3&&this.searchUser()}},created:function(){this.getApiFriends()}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friends"},[n("bit-header"),e._v(" "),n("div",{staticClass:"container"},[n("navigation"),e._v(" "),n("friend-details"),e._v(" "),n("div",{staticClass:"content"},[n("h1",{staticClass:"title"},[e._v("\n                My friends\n            ")]),e._v(" "),n("ul",{staticClass:"friends-list"},e._l(e.getFriends,function(t){return n("li",{on:{click:function(n){e.openFriend(t)}}},[e._v("\n\n                    "+e._s(t.username)+"\n\n                    "),n("friend-message-counter",{attrs:{friend:t}}),e._v(" "),t.unread?n("div",{staticClass:"messages"},[e._v("\n                        "+e._s(t.messages.length)+"\n                    ")]):e._e()],1)})),e._v(" "),n("hr"),e._v(" "),n("h2",[e._v("Search")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),n("ul",{staticClass:"friends-list"},e._l(e.searchResults,function(t){return n("li",["exist"===t.result?n("div",[n("span",{staticClass:"icon-add",on:{click:function(n){e.addFriend(t.idurl)}}}),e._v(" "),n("div",[n("p",[e._v(e._s(t.nickname))]),e._v(" "),n("p",[e._v(e._s(t.idurl))])]),e._v("\n\n                        "+e._s(e.addFriendResponse)+"\n                    ")]):e._e(),e._v(" "),"not exist"===t.result?n("div",[n("span",{staticClass:"icon-invite"},[e._v("invite")]),e._v(" "),n("div",[n("p",[e._v(e._s(t.nickname))])])]):e._e()])})),e._v(" "),n("hr"),e._v(" "),e.observeSearchAlias.length>1?n("div",[n("h2",[e._v("Other results")]),e._v(" "),n("ul",{staticClass:"friends-list"},e._l(e.searchResults,function(t){return n("li",[n("span",{staticClass:"icon-add",on:{click:function(n){e.addFriend(t.idurl)}}}),e._v(" "),n("div",[n("p",[e._v(e._s(t.nickname))]),e._v(" "),n("p",[e._v(e._s(t.idurl))])])])}))]):e._e()])],1)],1)},staticRenderFns:[]};var b=n("VU/8")(F,E,!1,function(e){n("Wxss")},"data-v-7151e3eb",null);t.default=b.exports},bwGm:function(e,t,n){"use strict";var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),a={computed:s()({},Object(r.c)(["isFileOpen"]))},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("nav",[t("ul",[t("li",[t("router-link",{staticClass:"icon-file",attrs:{to:"/home"}},[this._v("\n                Files\n            ")])],1),this._v(" "),t("li",[t("router-link",{staticClass:"icon-user",attrs:{to:"/users"}},[this._v("\n                Friends\n            ")])],1),this._v(" "),t("li",[t("router-link",{staticClass:"icon-settings",attrs:{to:"/settings"}},[this._v("\n                Settings\n            ")])],1)])])},staticRenderFns:[]};var c=n("VU/8")(a,o,!1,function(e){n("oqTw")},"data-v-73da2b20",null);t.a=c.exports},eFTo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("H/Zg"),s={name:"create-identity",components:{},data:function(){return{identityName:"",error:"",errorMessage:"",isLoading:!1}},methods:{createIdentity:function(){var e=this;console.log("creating idendity",this.identityName),this.isLoading=!0,i.a.createIdentity(this.identityName).then(function(t){e.isLoading=!1,"OK"===t.status?e.$router.push("loading-identity"):e.errorMessage=t.errors[0]})},restoreIdentity:function(e){var t=this;e.preventDefault();var n=event.target.files[0].path;i.a.recoverIdentityFile(n).then(function(e){"OK"===e.status?t.$router.push("loading-identity"):t.error=!0})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("\n        BitDust - Create Identity\n    ")]),e._v(" "),n("div",{class:{"is-loading":e.isLoading}},[n("h2",[e._v("\n            Create Identity\n        ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.identityName,expression:"identityName"}],attrs:{name:"identity"},domProps:{value:e.identityName},on:{input:function(t){t.target.composing||(e.identityName=t.target.value)}}}),e._v(" "),n("button",{staticClass:"alt",on:{click:e.createIdentity}},[e._v("create\n        ")]),e._v(" "),n("br"),e._v("\n        "+e._s(e.errorMessage)+"\n    ")]),e._v(" "),n("hr"),e._v(" "),n("div",[n("h2",[e._v("\n            Recover Identity\n        ")]),e._v(" "),n("input",{attrs:{type:"file",name:"file"},on:{change:function(t){e.restoreIdentity(t)}}})])])},staticRenderFns:[]};var a=n("VU/8")(s,r,!1,function(e){n("jOKb")},"data-v-a99f3b40",null);t.default=a.exports},gNcp:function(e,t,n){var i={"./Application.js":"XSFQ","./Files.js":"uoNi","./Friends.js":"I4Mg","./Messages.js":"HknJ","./index.js":"2mV7"};function s(e){return n(r(e))}function r(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(i)},s.resolve=r,e.exports=s,s.id="gNcp"},h47Z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),a={name:"loading-identity",computed:s()({},Object(r.c)(["connectionStatus"])),watch:{connectionStatus:function(e){"OK"===e.status&&this.$router.push("home")}},created:function(){}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("\n        Loading your identity...\n    ")])])}]},c=n("VU/8")(a,o,!1,null,null,null);t.default=c.exports},hbwU:function(e,t){},j7e0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),a=n("H/Zg"),o={name:"fileDetail",data:function(){return{downloadSuccess:!1,downloadError:!1,downloadIsLoading:!1}},props:{file:{type:Object}},methods:s()({},Object(r.b)(["getApiFiles","deleteFile","closeFile"]),{shareFile:function(){alert("Sharing this file: "+this.file.name+"\n \n Wait, Vessel is working on it ;)")},downloadFile:function(){var e=this;this.downloadIsLoading=!0,this.downloadSuccess=!1,this.downloadError=!1,a.a.downloadFile(this.file.path).then(function(t){t.ok?e.downloadSuccess=!0:e.downloadError=!0,e.downloadIsLoading=!1})},resetOpenFile:function(){this.downloadSuccess=!1,this.downloadSuccess=!1,this.downloadError=!1}})},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-detail"},[n("span",{staticClass:"icon-menu"}),e._v(" "),n("div",{staticClass:"file-detail-content"},[n("ul",{staticClass:"file-detail-list"},[n("li",{on:{click:function(t){e.shareFile()}}},[n("i",{staticClass:"icon-share-file"}),e._v("\n                Share\n            ")]),e._v(" "),n("li",{on:{click:function(t){e.downloadFile()}}},[n("i",{staticClass:"icon-download-file"}),e._v("\n                Download\n                "),e.downloadSuccess?n("i",[e._v(" ok")]):e._e()]),e._v(" "),n("li",{staticClass:"delete",on:{click:function(t){e.deleteFile(e.file.path)}}},[n("i",{staticClass:"icon-delete-file"}),e._v("\n                Delete\n            ")])])])])},staticRenderFns:[]};var u=n("VU/8")(o,c,!1,function(e){n("XHPq")},"data-v-0585887e",null).exports,d={name:"fileExtension",data:function(){return{}},props:{file:{type:Object}},methods:{getExtension:function(){return this.makeUrl(this.file.name.match(/[^.]+$/))},makeUrl:function(e){return"./static/extensions/"+e+".png"}}},l={render:function(){var e=this.$createElement;return(this._self._c||e)("i",{staticClass:"file-extension",style:{background:"url("+this.getExtension()+")"}})},staticRenderFns:[]};var f={data:function(){return{isFileOpen:!1,search:""}},components:{FileDetail:u,FileExtension:n("VU/8")(d,l,!1,function(e){n("G8ta")},"data-v-64b22460",null).exports},methods:s()({},Object(r.b)(["deleteFile","openFile","getApiFiles"])),computed:s()({},Object(r.c)(["getFiles"]),{filteredList:function(){var e=this;if(this.getFiles)return this.getFiles.filter(function(t){if("."!==t.name.charAt(0))return t.name.toLowerCase().includes(e.search.toLowerCase())})}}),created:function(){this.getApiFiles()}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-files"},[n("label",{attrs:{for:"search"}},[e._v("\n        Search\n    ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"Search file by name",id:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),n("ul",e._l(e.filteredList,function(t){return n("li",[n("file-extension",{attrs:{file:t}}),e._v(" "),n("span",{staticClass:"file-name",on:{click:function(n){e.openFile(t.path)}}},[e._v(e._s(t.name))]),e._v(" "),n("file-detail",{attrs:{file:t}})],1)})),e._v(" "),e.isFileOpen?n("div",[e._v("\n        open\n    ")]):e._e()])},staticRenderFns:[]};var v=n("VU/8")(f,h,!1,function(e){n("698s")},"data-v-3ce8aa9f",null).exports,_={data:function(){return{uploadFieldName:""}},methods:s()({},Object(r.b)(["getApiFiles","createFile"])),computed:s()({},Object(r.c)(["getFiles"]))},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropbox"},[e._v("\n    UPLOAD FILE\n    "),n("input",{staticClass:"input-file",attrs:{type:"file",name:e.uploadFieldName},on:{change:function(t){e.createFile(t.target)}}})])},staticRenderFns:[]};var p=n("VU/8")(_,m,!1,function(e){n("M99r")},"data-v-053c7ca0",null).exports,g={data:function(){return{downloadSuccess:!1,downloadError:!1,downloadIsLoading:!1}},methods:s()({},Object(r.b)(["deleteFile","closeFile"]),{downloadFile:function(){var e=this;this.downloadIsLoading=!0,this.downloadSuccess=!1,this.downloadError=!1,a.a.downloadFile(this.currentFile.path).then(function(t){t.ok?e.downloadSuccess=!0:e.downloadError=!0,e.downloadIsLoading=!1})},resetOpenFile:function(){this.downloadSuccess=!1,this.downloadSuccess=!1,this.downloadError=!1}}),computed:s()({},Object(r.c)(["isFileOpen","currentFile"])),watch:{currentFile:function(e){e&&this.resetOpenFile()},isFileOpen:function(e){e||this.resetOpenFile()}},mounted:function(){var e=this;window.addEventListener("keyup",function(t){"Escape"===t.code&&e.closeFile()})}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-files",class:{open:e.isFileOpen}},[n("span",{staticClass:"close",on:{click:e.closeFile}},[e._v("close")]),e._v(" "),n("h1",[e._v(e._s(e.currentFile.name))]),e._v(" "),n("button",{on:{click:e.downloadFile}},[e._v("download")]),e._v(" "),n("button",{on:{click:function(t){e.deleteFile(e.currentFile.path)}}},[e._v("delete")]),e._v(" "),e.downloadIsLoading?n("div",[e._v("\n        Loading\n    ")]):e._e(),e._v(" "),e.downloadSuccess?n("div",[e._v("\n        Download "+e._s(e.currentFile.path)+" Success\n    ")]):e._e(),e._v(" "),e.downloadError?n("div",[e._v("\n        Download "+e._s(e.currentFile.path)+" Error\n    ")]):e._e(),e._v(" "),n("hr"),e._v(" "),e._l(e.currentFile.versions,function(t){return n("div",[e._v("\n        reliable: "+e._s(t.reliable)+"\n        delivered: "+e._s(t.delivered)+"\n    ")])})],2)},staticRenderFns:[]};var E=n("VU/8")(g,F,!1,function(e){n("0IF4")},"data-v-47011b32",null).exports,b=n("bwGm"),y=n("90Rz"),O={name:"home",data:function(){return{activeTab:"myFiles"}},components:{userFiles:v,filesUpload:p,fileOpen:E,navigation:b.a,bitHeader:y.a},methods:{setMenuActive:function(e){this.activeTab=e}},computed:s()({},Object(r.c)(["connectionStatus","isFileOpen"]))},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home page"},[n("bit-header"),e._v(" "),n("div",{staticClass:"container"},[n("navigation"),e._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"sub-menu"},[n("li",{class:{active:"myFiles"===e.activeTab},on:{click:function(t){e.setMenuActive("myFiles")}}},[e._v("MY FILES\n                ")]),e._v(" "),n("li",{staticClass:"separator"}),e._v(" "),n("li",{class:{active:"myShares"===e.activeTab},on:{click:function(t){e.setMenuActive("myShares")}}},[e._v("SHARED WITH ME\n                ")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"myFiles"===this.activeTab,expression:"this.activeTab === 'myFiles'"}]},[n("files-upload"),e._v(" "),n("user-files")],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"myShares"===this.activeTab,expression:"this.activeTab === 'myShares'"}]},[e._v("\n                my shares content\n            ")]),e._v(" "),n("file-open")],1)],1)],1)},staticRenderFns:[]};var P=n("VU/8")(O,w,!1,function(e){n("35MQ")},null,null);t.default=P.exports},jOKb:function(e,t){},lg9s:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),a={name:"dead",computed:s()({},Object(r.c)(["connectionStatus"])),watch:{connectionStatus:function(e){"OK"===e.status&&this.$router.push("home")}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dead page"},[t("h1",[this._v("\n        Ooops, something went wrong, can you please restart Bitdust\n    ")]),this._v(" "),t("h2",[this._v("Trying to re-connect")])])}]},c=n("VU/8")(a,o,!1,null,null,null);t.default=c.exports},mdtg:function(e,t,n){"use strict";var i=n("mvHQ"),s=n.n(i),r=n("H/Zg"),a={sendMessage:function(e){return fetch(r.a.makeApiEndpoint("message/send"),{method:"POST",body:s()({global_id:e.user.global_id,data:{message:e.message}})}).then(function(e){return e.json()})},getMessages:function(){return fetch(r.a.makeApiEndpoint("message/receive/electron_ui_consumer")).then(function(e){return e.json()})}};t.a=a},nqlI:function(e,t){},oqTw:function(e,t){},pnIo:function(e,t){},sWyD:function(e,t){},uoNi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("H/Zg"),s={filesList:[],isFileOpen:!1,currentFile:{}},r={getFiles:function(e){return e.filesList},isFileOpen:function(e){return e.isFileOpen},currentFile:function(e){return e.currentFile},hasFilePath:function(e){return s.filesList?s.filesList.filter(function(t){return t.path===e}):[]}},a={openFile:function(e,t){var n=e.commit;n("UPDATE_CURRENT_FILE",t),n("UPDATE_IS_FILE_OPEN",!0)},closeFile:function(e){(0,e.commit)("UPDATE_IS_FILE_OPEN",!1)},deleteFile:function(e,t){e.commit;var n=e.dispatch;confirm("Are you sure ?")&&i.a.deleteFile(t).then(function(e){console.log("file removed",e),e.ok&&(n("getApiFiles"),n("closeFile"))})},getApiFiles:function(e){var t=e.commit;i.a.getFiles().then(function(e){t("UPDATE_FILE_LIST",e.result)})},createFile:function(e,t){e.commit;var n=e.dispatch;if(!t)return!1;var s=t.files[0].path,a=s.match(/\/([^/]*)$/)[1];0===r.hasFilePath(a).length?i.a.createPath(a).then(function(e){"OK"===e.status&&(i.a.createFile(a,s).then(function(e){"OK"===e.status&&console.log("file: ",a,"Created")}).catch(function(e){console.log("error: ",e)}),setTimeout(function(){n("getApiFiles")},500))}):(i.a.createFile(a,s).then(function(e){"OK"===e.status&&console.log("file: ",a,"Created")}).catch(function(e){console.log("error: ",e)}),setTimeout(function(){n("getApiFiles")},500))}};t.default={state:s,getters:r,mutations:{UPDATE_FILE_LIST:function(e,t){e.filesList=t},UPDATE_IS_FILE_OPEN:function(e,t){e.isFileOpen=t},UPDATE_CURRENT_FILE:function(e,t){e.currentFile=e.filesList.filter(function(e){return e.name===t})[0]}},actions:a,constants:{}}}},["NHnr"]);
//# sourceMappingURL=app.876d4cecc3afbd2618da.js.map